{% extends "../../main.html" %}

{% block title %}Game Objects{% end %}

{% block content %}
    <!-- Edit Corporation -->
    <div id="editCorporationModal" class="modal hide fade" style="display: none; ">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3>Edit Corporation</h3>
        </div>
        <div class="modal-body">
        <form id="edit-corporation" method="post" action="/admin/edit/corporation">
            {% raw xsrf_form_html() %}
            <input name="corporation_name" type="text" placeholder="Corporation Name" />
            <input name="description" type="text" placeholder="Description" />
        </form>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Close</a>
            <button class="btn btn-primary" type="button" onclick="">Save</button>
        </div>
    </div>
    <!-- Edit Box -->
    <div id="editBoxModal" class="modal hide fade" style="display: none; ">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3>Edit Box</h3>
        </div>
        <div class="modal-body">
        <form id="edit-box" method="post" action="/admin/edit/box">
            {% raw xsrf_form_html() %}
            <input name="box_name" type="text" placeholder="Box Name" />
            <select name="corporation_uuid">
                <option value=""></option>
                {% from models import Corporation %}
                {% for corporation in Corporation.all() %}
                    <option value="{{ corporation.uuid }}">{{ corporation.name }}</option>
                {% end %}
            </select>
            <input name="ip_address" type="text" placeholder="IP Address" />
            <input name="description" type="text" placeholder="Description" />
            <input name="difficulty" type="text" placeholder="Difficutly Rating" />
        </form>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Close</a>
            <button type="button" class="btn btn-primary">Save</button>
        </div>
    </div>
    <!-- Edit Flag -->
    <div id="editFlagModal" class="modal hide fade" style="display: none; ">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3>Edit Flag</h3>
        </div>
        <div class="modal-body">
        <form id="edit-box" method="post" action="/admin/edit/flag">
            {% raw xsrf_form_html() %}
            <input name="flag_name" type="text" placeholder="Flag Name" />
            <input name="token" type="text" placeholder="Token Value" />
            <input name="description" type="text" placeholder="Description" />
            <input name="value" type="text" placeholder="Reward Value" />
        </form>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Close</a>
            <button type="button" class="btn btn-primary">Save</button>
        </div>
    </div>
    <!-- Start Visable -->
    <div class="row-fluid">
        <div class="span2" />
            <ul class="nav nav-tabs nav-stacked affix">
                {% for corporation in Corporation.all() %}
                    <li><a href="#{{ corporation.uuid }}"><i class="icon-chevron-right"></i>{{ corporation.name }}</a></li>
                {% end %}
            </ul>
        </div>
        <div class="span10">
            <h1>Game Objects</h1>
            <br />
            {% for corporation in Corporation.all() %}
                <div id="{{ corporation.uuid }}" class="well">
                    <h2 style="display:inline;">{{ corporation.name }}&nbsp;&nbsp;</h2>
                    <a class="btn btn-small" data-toggle="modal" href="#editCorporationModal">
                        Edit Corp
                    </a>
                    <br />
                    <br />
                    {% for box in corporation.boxes %}
                        <div class="well">
                            <h3 style="display:inline;">{{ box.name }}&nbsp;&nbsp;</h3>
                                <a class="btn btn-small" data-toggle="modal" href="#editBoxModal">
                                    Edit Box
                                </a>
                            <br />
                            <br />
                            <div class="row-fluid">
                                <div class="well span4">
                                    <h4 style="display:inline;">IPv4 Addresses&nbsp;&nbsp;</h4>
                                    <a class="btn btn-small" data-toggle="modal" href="#editBoxModal">
                                        Add IPv4
                                    </a>
                                    <br />
                                    <hr>
                                    {% if len(box.ipv4) != 0 %}
                                        <table class="table table-striped">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>IPv4 Address</th>
                                                    <th><!-- Delete --></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for ip in box.ipv4 %}
                                                    <tr>
                                                        <td>{{ box.ipv4.index(ip) + 1}}</td>
                                                        <td>{{ ip }}</td>
                                                        <td>
                                                            <button class="btn btn-danger btn-mini" type="button" onclick="">
                                                                Delete
                                                            </button>
                                                        </td>
                                                    </tr>
                                                {% end %}
                                            </tbody>
                                        </table>
                                    {% else %}
                                        <strong>No IPv4 Addresses</strong>
                                    {% end %}
                                </div>
                                <div class="well span4">
                                    <h4 style="display:inline;">IPv6 Addresses&nbsp;&nbsp;</h4>
                                    <a class="btn btn-small" data-toggle="modal" href="#editBoxModal">
                                        Add IPv6
                                    </a>
                                    <br />
                                    <hr>
                                    {% if len(box.ipv6) != 0 %}
                                        <table class="table table-striped">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>IPv6 Address</th>
                                                    <th><!-- Delete --></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for ip in box.ipv6 %}
                                                    <tr>
                                                        <td>{{ box.ipv6.index(ip) + 1 }}</td>
                                                        <td>{{ ip }}</td>
                                                        <td>
                                                            <button class="btn btn-danger btn-mini" type="button" onclick="">
                                                                Delete
                                                            </button>
                                                        </td>
                                                    </tr>
                                                {% end %}
                                            </tbody>
                                        </table>
                                    {% else %}
                                        <strong>No IPv6 Addresses</strong>
                                    {% end %}
                                </div>
                            </div>
                            <div class="well">
                                <h4>Flags on {{ box.name }}</h4>
                                <hr>
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Name</th>
                                            <th>Description</th>
                                            <th>Token</th>
                                            <th>Value</th>
                                            <th><!-- Edit Button --></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for flag in box.flags %}
                                            <tr>
                                                <td>{{ flag.id }}</td>
                                                <td>{{ flag.name }}</td>
                                                <td>{{ flag.description }}</td>
                                                <td>{{ flag.token }}</td>
                                                <td>${{ flag.value }}</td>
                                                <td>
                                                    <a class="btn btn-mini" data-toggle="modal" href="#editFlagModal">
                                                        Edit Flag
                                                    </a>
                                                </td>
                                            </tr>
                                        {% end %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <br />
                    {% end %}
                </div>
            {% end %}
        </div>
    </div>
{% end %}